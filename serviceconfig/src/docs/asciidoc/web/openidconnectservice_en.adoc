[[OpenIdConnectService]]
=== OpenIdConnectService
The service for managing the functions of OpenID Connect Relying Party.

==== Interface Name
----
org.iplass.mtp.impl.auth.authenticate.oidc.OpenIdConnectService
----

==== Implementing Class Name
----
org.iplass.mtp.impl.auth.authenticate.oidc.OpenIdConnectService
----

==== Settings of OpenIdConnectService
OpenIdConnectService can be configured with the following items.

===== Configurable Items
[cols="1,1,3", options="header"]
|===
| Item | Value | Description
| allowedClockSkewMinutes | int | Allowable clock skew time. Default value is 0 (minutes).
| jwksCacheLifetimeMinutes | int | The cashe time of jwks. Default value is 360 (minutes).
| clientSecretType | String | The type of Client Secret. Default value is  `OIDCCS`.
| httpClientConfig | <<HttpClientConfig_oidc, HttpClientConfig>> | Settings of HTTP client.
|===

[[HttpClientConfig_oidc]]
.HttpClientConfig
Please specify org.iplass.mtp.impl.http.HttpClientConfig to the class.

The following items can be configured.
[cols="1,1,3", options="header"]
|====================
| Item | Value | Description
| connectionTimeout | int | Timeout in milliseconds for establishing an HTTP connection. The default value is 30000 (30 seconds).
| soTimeout | int | socket timeout (SO_TIMEOUT) (milliseconds) during HTTP communication. The default value is 30000 (30 seconds).
| poolingMaxTotal | int | Maximum number of pools for http connections. The default value is 20.
| poolingDefaultMaxPerRoute | int | Maximum number of http connections per domain. The default value is 2.
| poolingTimeToLive | int | Lifetime of pooled http connections (milliseconds). The default is unlimited.
| proxyHost | String | Proxy server host.
| proxyPort | int | Proxy server port number.
| httpClientBuilderFactory | <<HttpClientBuilderFactory_oidc, HttpClientBuilderFactory>> | Specify this if you want to create a custom HttpClientBuilder.
|====================

[[HttpClientBuilderFactory_oidc]]
.HttpClientBuilderFactory
Please specify the implementation class of org.iplass.mtp.impl.http.HttpClientBuilderFactory to the class.

The following HttpClientBuilderFactory is provided as standard.

* <<MicrometerHttpClientBuilderFactory, [.eeonly]#MicrometerHttpClientBuilderFactory#>>

===== Example
[source, xml]
----
<service>
	<interface>org.iplass.mtp.impl.auth.authenticate.oidc.OpenIdConnectService</interface>
        <property name="httpClientConfig" class="org.iplass.mtp.impl.http.HttpClientConfig">
            <property name="proxyHost" value="proxyhost.dentsusoken.com"/>
            <property name="proxyPort" value="8080"/>
        </property>
</service>
----
