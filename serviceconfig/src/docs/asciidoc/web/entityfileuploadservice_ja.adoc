[[EntityFileUploadService]]
=== EntityFileUploadService
Entityに対して、ExcelまたはCSVファイルのアップロード処理を管理するサービスです。

==== インタフェース名
----
org.iplass.mtp.impl.fileport.EntityFileUploadService
----

==== 実装クラス名
----
org.iplass.mtp.impl.fileport.EntityFileUploadService
----

==== EntityFileUploadServiceの設定
EntityFileUploadServiceを設定します。

===== 設定項目
[cols="1,1,3a", options="header"]
|===
| 項目 | 値 | 説明
| showErrorLimitCount | int | ファイルアップロード時のエラー表示件数上限値。`-1` を指定した場合は無制限となる。
| defaultUpdateTargetVersionForNoneVersionedEntity | TargetVersion | アップロード対象がバージョン管理Entity以外の場合の更新時のデフォルトTargetVersion。デフォルト値は `CURRENT_VALID` です。
| mustOrderByWithLimit | boolean | アップロード形式でのダウンロード時に、件数上限が指定されている場合にOrderByを必ず指定するかを設定する。デフォルト値は `false` です。

SQLServerを利用している場合は、 `true` を指定してください。
SQLServerの場合、以下の条件に該当するとデータが取得できない状況になりますが、この値を `true` にすることでデータを取得します。

* ダウンロード件数制限をしている
* 指定された検索条件に多重度複数のReferenceに対する条件が含まれる
|===

===== 設定例
[source,xml]
----
<service>
	<interface>org.iplass.mtp.impl.fileport.EntityFileUploadService</interface>
	<class>org.iplass.mtp.impl.fileport.EntityFileUploadService</class>
	<!-- アップロードエラー表示件数上限値 (-1は無制限)  -->
	<property name="showErrorLimitCount" value="100"/>

	<!--
	 アップロードのバージョン管理Entity以外の場合の更新時のデフォルトTargetVersion。
	 デフォルトはCURRENT_VALID。
	-->
	<property name="defaultUpdateTargetVersionForNoneVersionedEntity" value="SPECIFIC"/>

	<!--
		ダウンロード時にLimitが指定されている場合にOrderByを必ず指定するか。
		SQLServerの場合はtrueを指定すること。
	-->
	<property name="mustOrderByWithLimit" value="false"/>
</service>
----
